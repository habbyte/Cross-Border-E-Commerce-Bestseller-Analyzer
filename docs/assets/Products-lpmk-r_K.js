import{_ as S,c,m as g,o as d,a as e,t as n,F as f,e as C,p as H,q as K,G as Q,h as y,i as $,H as m,B as X,u as J,g as Y,s as N,b as Z,f as D,I as b,j as F,v as ee,l as te,w as U}from"./index-Bl43pGE1.js";import{T as ae}from"./TriState-BCsy29xn.js";const P={BASE_URL:"/Cross-Border-E-Commerce-Bestseller-Analyzer/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"https://cross-border-e-commerce-bestseller.onrender.com"},V=(r,o=!0)=>{const s=P==null?void 0:P[`VITE_FLAG_${r.toUpperCase()}`];return typeof s=="string"?s==="true":o},E={emptyWarmCard:V("empty_warm_card"),onboarding:V("onboarding"),reasonCard:V("reason_card")},se={name:"OnboardingSteps",emits:["next-step"],setup(r,{emit:o}){const{t:s}=K(),a=Q(),u=y(()=>["search","compare","monitor"].map((k,R)=>({id:k,index:R+1,label:s(`onboarding.steps.${k}`),completed:a.isCompleted(k)}))),_=y(()=>a.currentStep()),i=y(()=>u.value.every(h=>h.completed)),v=y(()=>u.value.some(h=>h.completed)),I=y(()=>!a.dismissed);return $(()=>{u.value.filter(h=>!h.completed).forEach(h=>{m.track("onboarding_step_shown",{step:h.id})})}),{t:s,steps:u,nextStepId:_,handleNext:()=>{_.value&&(o("next-step",_.value),m.track("onboarding_step_next_click",{step:_.value}))},handleDismiss:()=>{a.dismiss()},handleReset:()=>{a.reset()},visible:I,allCompleted:i,hasProgress:v}}},oe={key:0,class:"onboarding-steps",role:"complementary","aria-label":"onboarding"},ne={class:"onboarding-steps__header"},re={class:"onboarding-steps__title"},ie={class:"onboarding-steps__actions"},le={class:"onboarding-steps__complete"},de={class:"onboarding-steps__footer"},ce={class:"onboarding-steps__list"},_e={class:"onboarding-steps__status","aria-hidden":"true"},me={key:0},ue={key:1},pe={class:"onboarding-steps__content"},he={class:"onboarding-steps__label"},ye={key:0,class:"onboarding-steps__hint"},be={class:"onboarding-steps__footer"},fe=["disabled"];function ge(r,o,s,a,u,_){return a.visible?(d(),c("aside",oe,[e("div",ne,[e("h2",re,n(a.t("onboarding.title")),1),e("div",ie,[a.hasProgress?(d(),c("button",{key:0,type:"button",class:"onboarding-steps__reset",onClick:o[0]||(o[0]=(...i)=>a.handleReset&&a.handleReset(...i))},n(a.t("onboarding.cta.reset")),1)):g("",!0),e("button",{type:"button",class:"onboarding-steps__dismiss",onClick:o[1]||(o[1]=(...i)=>a.handleDismiss&&a.handleDismiss(...i))},n(a.t("onboarding.cta.dismiss")),1)])]),a.allCompleted?(d(),c(f,{key:0},[e("div",le,n(a.t("onboarding.allDone")),1),e("div",de,[e("button",{type:"button",class:"btn btn-primary",onClick:o[2]||(o[2]=(...i)=>a.handleReset&&a.handleReset(...i))},n(a.t("onboarding.cta.reset")),1)])],64)):(d(),c(f,{key:1},[e("ol",ce,[(d(!0),c(f,null,C(a.steps,i=>(d(),c("li",{key:i.id,class:H(["onboarding-steps__item",{"is-completed":i.completed,"is-current":i.id===a.nextStepId}])},[e("div",_e,[i.completed?(d(),c("span",me,"âœ”")):(d(),c("span",ue,n(i.index),1))]),e("div",pe,[e("p",he,n(i.label),1),i.completed?(d(),c("p",ye,n(a.t("onboarding.done")),1)):g("",!0)])],2))),128))]),e("div",be,[e("button",{type:"button",class:"btn btn-primary",disabled:!a.nextStepId,onClick:o[3]||(o[3]=(...i)=>a.handleNext&&a.handleNext(...i))},n(a.t("onboarding.cta.next")),9,fe)])],64))])):g("",!0)}const ve=S(se,[["render",ge],["__scopeId","data-v-3559efbe"]]),ke={name:"EmptyWarmCard",props:{titleKey:{type:String,default:"empty.warm.title"},descKey:{type:String,default:"empty.warm.desc"},primaryKey:{type:String,default:"empty.warm.ctaPrimary"},secondaryKey:{type:String,default:"empty.warm.ctaSecondary"}},emits:["load-sample","view-guide"],setup(r,{emit:o}){const{t:s}=K();return $(()=>{m.track("empty_warm_shown")}),{t:s,handleLoadSample:()=>{m.track("empty_warm_load_sample_click"),o("load-sample")},handleViewGuide:()=>{m.track("empty_warm_view_guide_click"),o("view-guide")}}}},we={class:"empty-warm-card",role:"status","aria-live":"polite"},Ce={class:"empty-warm-card__title"},Se={class:"empty-warm-card__desc"},$e={class:"empty-warm-card__actions"};function Ie(r,o,s,a,u,_){return d(),c("section",we,[X(r.$slots,"illustration",{},()=>[o[2]||(o[2]=e("svg",{class:"empty-warm-card__illustration",viewBox:"0 0 64 64","aria-hidden":"true"},[e("circle",{cx:"32",cy:"32",r:"30",fill:"rgba(59,130,246,0.08)",stroke:"rgba(59,130,246,0.3)","stroke-width":"2"}),e("path",{d:"M20 33h16l-5.2 5.2",stroke:"rgba(59,130,246,0.8)","stroke-width":"3",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M32 20l9 9-9 9",stroke:"rgba(59,130,246,0.8)","stroke-width":"3",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"})],-1))]),e("h2",Ce,n(a.t(s.titleKey)),1),e("p",Se,n(a.t(s.descKey)),1),e("div",$e,[e("button",{type:"button",class:"btn btn-primary",onClick:o[0]||(o[0]=(...i)=>a.handleLoadSample&&a.handleLoadSample(...i))},n(a.t(s.primaryKey)),1),e("button",{type:"button",class:"btn btn-secondary",onClick:o[1]||(o[1]=(...i)=>a.handleViewGuide&&a.handleViewGuide(...i))},n(a.t(s.secondaryKey)),1)])])}const Re=S(ke,[["render",Ie],["__scopeId","data-v-6ceed76b"]]),De=3;function Pe(r){const o=[];return!r||typeof r!="object"?o:(Array.isArray(r.reasons)&&r.reasons.length>0&&r.reasons.forEach(s=>{o.push({key:"recommendation.reasons.custom",values:{text:s}})}),typeof r.marginRate=="number"&&r.marginRate>=25&&o.push({key:"recommendation.reasons.highMargin",values:{value:r.marginRate.toFixed(1)}}),typeof r.competitionScore=="number"&&r.competitionScore<=35&&o.push({key:"recommendation.reasons.lowCompetition",values:{value:r.competitionScore}}),typeof r.stock=="number"&&r.stock>=50&&o.push({key:"recommendation.reasons.sufficientStock",values:{value:r.stock}}),Array.isArray(r.tags)&&r.tags.length>0&&o.push({key:"recommendation.reasons.tagHighlight",values:{tag:r.tags[0]}}),o.length===0&&o.push({key:"recommendation.reasons.default"}),o.slice(0,De))}const Ve={name:"ReasonCard",props:{product:{type:Object,required:!0}},emits:["view-details"],setup(r,{emit:o}){const{t:s}=K(),a=y(()=>Pe(r.product).map(_=>s(_.key,_.values||{})));return $(()=>{var _;m.track("reason_card_shown",{id:(_=r.product)==null?void 0:_.id})}),{t:s,translatedReasons:a,handleDetails:()=>{var i;const _=(i=r.product)==null?void 0:i.id;m.track("recommendation_reason_click_detail",{productId:_}),m.track("reason_card_view_details_click",{id:_}),o("view-details",r.product)}}}},Ee={class:"reason-card",role:"note","aria-live":"polite"},Ke={class:"reason-card__header"},Ae={class:"reason-card__title"},Le={class:"reason-card__list"},We={class:"reason-card__footer"};function xe(r,o,s,a,u,_){return d(),c("section",Ee,[e("header",Ke,[e("h3",Ae,n(a.t("recommendation.title")),1)]),e("ul",Le,[(d(!0),c(f,null,C(a.translatedReasons,(i,v)=>(d(),c("li",{key:v},n(i),1))),128))]),e("footer",We,[e("button",{type:"button",class:"btn btn-link",onClick:o[0]||(o[0]=(...i)=>a.handleDetails&&a.handleDetails(...i))},n(a.t("recommendation.actions.details")),1)])])}const ze=S(Ve,[["render",xe],["__scopeId","data-v-94f707a1"]]),Be={class:"page products"},Te={class:"page__header"},Ge={class:"page__heading"},Me={class:"page__subtitle text-muted"},Oe={class:"toolbar mt-3"},Ne={class:"sr-only",for:"products-search"},Fe=["placeholder"],Ue={class:"sr-only",for:"products-platform"},je=["value"],qe={key:1,class:"empty-state"},He={class:"products-grid"},Qe={class:"product-card__header"},Xe={class:"product-card__title"},Je={class:"product-card__subtitle text-muted"},Ye={class:"product-card__status"},Ze={class:"product-card__body"},et={class:"product-card__media"},tt=["src"],at={key:1,class:"product-card__placeholder"},st={class:"product-card__meta"},ot={class:"meta-item"},nt={class:"meta-item"},rt={class:"meta-item"},it={class:"meta-item"},lt={key:0,class:"product-card__tags"},dt={class:"product-card__footer"},ct={class:"product-card__actions"},_t=["onClick"],mt=["disabled","onClick"],ut=["onClick"],pt={__name:"Products",setup(r){const o=J(),s=Y(),a=N(""),u=N("all"),_=y(()=>{const t={platform:u.value==="all"?"":u.value};return typeof s.searchProducts=="function"?s.searchProducts(a.value,t)??[]:s.products??[]}),i=y(()=>{var t;return(((t=_.value)==null?void 0:t.length)??0)===0}),v=y(()=>E.emptyWarmCard&&!s.loading&&!s.error&&i.value),I=[{value:"all",labelKey:"products.filter.all"},{value:"amazon",labelKey:"settings.platforms.amazon"},{value:"shopee",labelKey:"settings.platforms.shopee"},{value:"lazada",labelKey:"settings.platforms.lazada"},{value:"ebay",labelKey:"settings.platforms.ebay"},{value:"aliexpress",labelKey:"settings.platforms.aliexpress"}];function A(){m.track("search_input",{area:"products",q:a.value})}function L(){m.track("filter_change",{area:"products",platform:u.value})}function W(){typeof s.loadSampleProducts=="function"&&(s.loadSampleProducts(),m.track("ui_click",{area:"products_empty",action:"load_samples"}))}function h(){console.info("[guide] open usage guide placeholder"),m.track("ui_click",{area:"products_empty",action:"view_guide"})}function k(t){console.info("[reason] details for",t==null?void 0:t.id),m.track("recommendation_reason_click_detail",{productId:t==null?void 0:t.id})}function R(t){var p;!(t!=null&&t.id)||typeof s.toggleWatch!="function"||(s.toggleWatch(t.id),m.track("ui_click",{area:"products_card",action:"toggle_watch",productId:t.id,watched:((p=s.isWatched)==null?void 0:p.call(s,t.id))??!1}))}function j(t){if(t!=null&&t.id&&!(typeof s.isInCompare=="function"&&s.isInCompare(t.id))&&typeof s.addToCompare=="function")try{s.addToCompare(t.id),m.track("ui_click",{area:"products_card",action:"add_compare",productId:t.id})}catch(p){console.warn("[compare] failed to add product",t.id,p)}}function q(t){t!=null&&t.id&&(m.track("ui_click",{area:"products_card",action:"view_detail",productId:t.id}),o.push({name:"ProductDetail",params:{id:t.id}}))}return $(async()=>{typeof s.initialize=="function"&&await s.initialize(),m.track("page_view",{page:"products"})}),(t,p)=>(d(),c("section",Be,[e("header",Te,[e("div",Ge,[e("h1",null,n(t.$t("products.title")||"å•†å“ç®¡ç†"),1),e("p",Me,n(t.$t("products.subtitle")),1)]),b(E).onboarding?(d(),D(ve,{key:0,class:"page__onboarding"})):g("",!0)]),e("div",Oe,[e("label",Ne,n(t.$t("products.search.placeholder")),1),F(e("input",{id:"products-search","onUpdate:modelValue":p[0]||(p[0]=l=>a.value=l),class:"input",type:"search",placeholder:t.$t("products.search.placeholder")||"æœç´¢å•†å“","aria-label":"æœç´¢å•†å“",onInput:A},null,40,Fe),[[ee,a.value]]),e("label",Ue,n(t.$t("products.filter.all")),1),F(e("select",{id:"products-platform","onUpdate:modelValue":p[1]||(p[1]=l=>u.value=l),class:"select ml-2","aria-label":"é€‰æ‹©å¹³å°",onChange:L},[(d(),c(f,null,C(I,l=>e("option",{key:l.value,value:l.value},n(t.$t(l.labelKey)),9,je)),64))],544),[[te,u.value]])]),Z(ae,{class:"mt-4",loading:b(s).loading,error:b(s).error||"",empty:i.value,"empty-text":t.$t("products.empty")||""},{empty:U(()=>[v.value?(d(),D(Re,{key:0,onLoadSample:W,onViewGuide:h})):(d(),c("div",qe,n(t.$t("products.empty")||"æš‚æ— æ•°æ®"),1))]),default:U(()=>[e("div",He,[(d(!0),c(f,null,C(_.value,l=>{var x,z,B,T,G,M,O;return d(),c("article",{key:l.id,class:"product-card",role:"article","aria-label":"product"},[e("header",Qe,[e("div",null,[e("h3",Xe,n(l.name),1),e("p",Je,n(t.$t(`settings.platforms.${l.platform}`)||l.platform),1)]),e("span",Ye,n(t.$t(`products.status.${l.status}`)||l.status),1)]),e("div",Ze,[e("figure",et,[l.imageUrl?(d(),c("img",{key:0,src:l.imageUrl,alt:"",class:"product-card__image",loading:"lazy"},null,8,tt)):(d(),c("div",at,[...p[2]||(p[2]=[e("span",{"aria-hidden":"true"},"ðŸ“¦",-1)])]))]),e("dl",st,[e("div",ot,[e("dt",null,n(t.$t("products.price")),1),e("dd",null,n(l.formattedPrice??l.price),1)]),e("div",nt,[e("dt",null,n(t.$t("products.profitMargin")),1),e("dd",null,n(l.marginRate??"--")+"%",1)]),e("div",rt,[e("dt",null,n(t.$t("products.stock")),1),e("dd",null,n(l.stock??0),1)]),e("div",it,[e("dt",null,n(t.$t("compare.competitionLabel")),1),e("dd",null,n(l.competitionScore??"--"),1)])]),(x=l.tags)!=null&&x.length?(d(),c("ul",lt,[(d(!0),c(f,null,C(l.tags,w=>(d(),c("li",{key:w},n(w),1))),128))])):g("",!0)]),e("footer",dt,[e("div",ct,[e("button",{type:"button",class:"btn btn-secondary",onClick:w=>R(l)},n((B=(z=b(s)).isWatched)!=null&&B.call(z,l.id)?t.$t("watchlist.removeFromWatchlist"):t.$t("watchlist.addToWatchlist")),9,_t),e("button",{type:"button",class:"btn btn-secondary",disabled:(G=(T=b(s)).isInCompare)==null?void 0:G.call(T,l.id),onClick:w=>j(l)},n((O=(M=b(s)).isInCompare)!=null&&O.call(M,l.id)?t.$t("products.actions.compared"):t.$t("products.actions.compare")),9,mt),e("button",{type:"button",class:"btn btn-primary",onClick:w=>q(l)},n(t.$t("products.actions.analyze")),9,ut)]),b(E).reasonCard?(d(),D(ze,{key:0,product:l,class:"product-card__reason mt-2",onViewDetails:()=>k(l)},null,8,["product","onViewDetails"])):g("",!0)])])}),128))])]),_:1},8,["loading","error","empty","empty-text"])]))}},bt=S(pt,[["__scopeId","data-v-bdbac71a"]]);export{bt as default};
