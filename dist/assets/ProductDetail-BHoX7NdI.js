import{_ as w,r as I,z as W,c as u,o as m,a as t,b as S,t as e,w as B,m as y,j as F,p as N,F as P,e as z,A as E,u as L,g as R,q as V,s as _,h as v,i as q}from"./index-CSEj975q.js";import{T as U}from"./TriState-DMjN0B_L.js";const j={name:"ProductDetail",components:{TriState:U},props:{id:{type:String,required:!0}},setup(s){E();const i=L(),c=R(),{t:o}=V(),h=_(!0),g=_(""),r=_(!1),l=_(null),n=v(()=>c.isWatched(s.id)),p=v(()=>c.isInCompare(s.id)),a=v(()=>`https://via.placeholder.com/300x300?text=${encodeURIComponent(o("common.product"))}`),b=d=>({low:o("productDetail.competition.low"),medium:o("productDetail.competition.medium"),high:o("productDetail.competition.high")})[d]||d,f=()=>{c.toggleWatch(s.id)},D=()=>{p.value||c.addToCompare(s.id)},k=()=>{i.go(-1)},T=d=>{navigator.clipboard.writeText(d).then(()=>{r.value=!0,setTimeout(()=>{r.value=!1},2e3)}).catch(C=>{console.error("å¤åˆ¶å¤±è´¥:",C)})};return q(async()=>{try{c.isInitialized||await c.initialize();try{l.value=c.getProduct(s.id)}catch(d){g.value=(d==null?void 0:d.message)||"Failed to load product",l.value=null}}finally{h.value=!1}}),{product:l,loading:h,detailError:g,isWatched:n,isInCompare:p,showCopyNotification:r,placeholderImage:a,getCompetitionText:b,toggleWatch:f,addToCompare:D,goBack:k,copyToClipboard:T}}},A={class:"product-detail"},M={class:"page-header"},G={class:"page-title"},H={key:0,class:"product-content"},J={class:"product-header"},K={class:"product-image"},O=["src","alt"],Q={class:"product-info"},X={class:"product-title"},Y={class:"product-meta"},Z={class:"product-platform"},x={class:"product-category"},$={class:"product-stats"},tt={class:"stat-item"},ot={class:"stat-label"},st={class:"stat-value price"},et={class:"stat-item"},at={class:"stat-label"},it={class:"stat-value"},ct={class:"stat-item"},dt={class:"stat-label"},nt={class:"stat-value"},rt={class:"stat-item"},lt={class:"stat-label"},pt={class:"product-actions"},ut=["disabled"],mt={class:"product-details"},_t={class:"detail-section"},ht={class:"detail-title"},gt={class:"detail-content"},vt={class:"detail-section"},bt={class:"detail-title"},Ct={class:"keywords"},yt={class:"keyword-text"},ft=["onClick"],Dt={key:0,class:"copy-notification"};function kt(s,i,c,o,h,g){const r=I("TriState"),l=W("img-fallback");return m(),u("div",A,[t("div",M,[t("button",{class:"btn btn-ghost back-btn",onClick:i[0]||(i[0]=(...n)=>o.goBack&&o.goBack(...n))},e(s.$t("productDetail.goBack")),1),t("h1",G,"ğŸ“¦ "+e(s.$t("productDetail.title")),1)]),S(r,{loading:o.loading,error:o.detailError,empty:o.product?0:1,emptyText:s.$t("productDetail.notFound")},{default:B(()=>{var n,p;return[o.product?(m(),u("div",H,[t("div",J,[t("div",K,[F(t("img",{src:((n=o.product)==null?void 0:n.imageUrl)||o.placeholderImage,alt:((p=o.product)==null?void 0:p.title)||s.t("common.product")},null,8,O),[[l]])]),t("div",Q,[t("h2",X,e(o.product.title),1),t("div",Y,[t("span",Z,e(o.product.platform),1),t("span",x,e(o.product.category),1)]),t("div",$,[t("div",tt,[t("span",ot,e(s.$t("productDetail.price")),1),t("span",st,e(o.product.formattedPrice),1)]),t("div",et,[t("span",at,e(s.$t("productDetail.sales")),1),t("span",it,e(o.product.sales.toLocaleString()),1)]),t("div",ct,[t("span",dt,e(s.$t("productDetail.rating")),1),t("span",nt,e(o.product.rating)+"/5",1)]),t("div",rt,[t("span",lt,e(s.$t("productDetail.competitionLabel")),1),t("span",{class:N(["stat-value",`competition-${o.product.competition}`])},e(o.getCompetitionText(o.product.competition)),3)])]),t("div",pt,[t("button",{class:"btn btn-primary",onClick:i[1]||(i[1]=(...a)=>o.toggleWatch&&o.toggleWatch(...a))},e(o.isWatched?s.$t("productDetail.removeFromWatchlist"):s.$t("productDetail.addToWatchlist")),1),t("button",{class:"btn btn-secondary",onClick:i[2]||(i[2]=(...a)=>o.addToCompare&&o.addToCompare(...a)),disabled:o.isInCompare},e(o.isInCompare?s.$t("productDetail.removeFromCompare"):s.$t("productDetail.addToCompare")),9,ut)])])]),t("div",mt,[t("div",_t,[t("h3",ht,e(s.$t("productDetail.description")),1),t("p",gt,e(o.product.description||s.$t("productDetail.noDescription")),1)]),t("div",vt,[t("h3",bt,e(s.$t("productDetail.keywords")),1),t("div",Ct,[(m(!0),u(P,null,z(o.product.tags||[],a=>(m(),u("div",{key:a,class:"keyword-tag"},[t("span",yt,e(a),1),t("button",{class:"copy-btn",onClick:b=>o.copyToClipboard(a),title:"å¤åˆ¶å…³é”®è¯"}," ğŸ“‹ ",8,ft)]))),128))]),o.showCopyNotification?(m(),u("div",Dt," å¤åˆ¶æˆåŠŸï¼ ")):y("",!0)])])])):y("",!0)]}),_:1},8,["loading","error","empty","emptyText"])])}const It=w(j,[["render",kt],["__scopeId","data-v-942a759a"]]);export{It as default};
